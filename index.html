<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  
  <title>js-campominato-grid</title>
</head>
<body>

  <div class="main-wrapper d-flex justify-content-center align-items-center">
    <div class="grid-container d-flex flex-wrap ">
      <button class="btn-start">Premi per Iniziare</button>
    </div>
  </div>
  
</body>

<style>

body{
  background-color: gold;
}

.main-wrapper{
  height: 100vh;
}

.grid-container{
  width: 800px;
  aspect-ratio: 1;
}

.square{
  cursor: pointer;
  width: 80px;
  height: 80px;
  display: flex;
  justify-content:center ;
  align-items: center;
  background-color: khaki;
  border: 10px solid white;
  border-radius: 10px;
}

.btn-start{
  width: 100%;
  height: 100%;
}

.square.clicked{
  background-color: rgb(14, 138, 215);
}

.square.bombs{
  background-color: red;
}

</style>

<script>

const gridContainer = document.querySelector(".grid-container")
const btnStart = document.querySelector(".btn-start");

// Array per le bombe
let bombNumbers = [];

// Conteggio punti
let counterPoint = 0;

// Funzione per generare 16 numeri unici casuali come posizioni delle bombe
function generateBombNumbers() {
  
  bombNumbers = [];
  while(bombNumbers.length < 16) {

    const randomNumber = Math.floor(Math.random() * 100) + 1;
    
    if (!bombNumbers.includes(randomNumber)) {
      bombNumbers.push(randomNumber);
    }
  }
}

///Bottone start
btnStart.addEventListener("click", inizio)

///////////////////////////////////////////////
///////////////Ciclo 100 Elementi//////////////
///////////////////////////////////////////////

function inizio(){
  reset()
  // Genera le bombe all'inizio di ogni gioco
  generateBombNumbers();
  // Resetta il contatore di punteggio
  counterPoint = 0; 
  for(let i = 1; i <= 100; i++){

  const square = inserisciRiquadro(i)

  gridContainer.append(square)
 }
}

// Definizione della funzione inserisciRiquadro che crea un quadrato (div) con un numero associato

function inserisciRiquadro(numero){
  const sq = document.createElement("div");
  sq.className = "square";
  
  /////////////////////////////
  //////Funzione///Click///////
  /////////////////////////////
  
  sq.addEventListener("click", function(){

    // Controlla se il quadrato cliccato è una bomba
    if (bombNumbers.includes(numero)) {
      // Colora il quadrato di rosso se è una bomba
      sq.style.backgroundColor = "red"; 
      alert(`Hai trovato una bomba! Hai fatto: ${counterPoint}`);
      console.log(`Punteggio finale: ${counterPoint}`);
    } else {
      // Altrimenti, segna il quadrato come cliccato
      sq.classList.toggle("clicked");
      counterPoint++;
      console.log(`Punteggio attuale: ${counterPoint}`);
    }
    console.log(numero);
  });

  // Restituisce l'elemento 'sq' così che possa essere aggiunto al codice
  return sq
  
  /////////////////////////////
  ///Funzione numeri casuali///
  /////////////////////////////

}

///////////////////////
/////////RESET/////////
///////////////////////

function reset(){

  console.log("Reset del gioco")
  gridContainer.innerHTML = ""; 
}
</script>
</html>
